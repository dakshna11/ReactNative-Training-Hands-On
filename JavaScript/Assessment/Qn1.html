<html>
    <head>
        <title>Getting response using promise</title>
    </head>
    <body>
        <h3>Getting response using promise</h3>
        <script>
            //const fetchPromise = fetch("https://jsonplaceholder.typicode.com/posts/1")
            //.then(response => console.log(response.json()))
            //.then(data =>console.log(data))

           let resp_promise = new Promise((resolve, reject)=>{
                    let xhttp = new XMLHttpRequest()
                    xhttp.onreadystatechange=function(){
                        if(this.readyState==4 && this.status==200){
                            resolve(xhttp.responseText)
                        }
                        if(this.readyState==4 && this.status!=200){
                            reject("error")
                        }
                    }
                    xhttp.open("GET","https://jsonplaceholder.typicode.com/posts/1",true)
                    xhttp.send()
                })
                resp_promise.then(function(data){
                    console.log(JSON.parse(data))
                })
                resp_promise.catch(function(err){
                    console.log(err)
                })  
        </script>
    </body>
</html>
